<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="801px" height="741px" viewBox="-0.5 -0.5 801 741" content="&lt;mxfile host=&quot;www.draw.io&quot; modified=&quot;2020-02-21T07:23:28.782Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36&quot; etag=&quot;CrdR0LQPclGnW_sTXdaO&quot; version=&quot;12.7.2&quot; type=&quot;github&quot;&gt;&lt;diagram id=&quot;C5RBs43oDa-KdzZeNtuy&quot; name=&quot;Page-1&quot;&gt;5Vpbd+I2EP41nLYPm+MLGPIYyK3b3WVzadM+ClvYCrLlleSA99dXkuW7A6SEENJzOCCNdZ/vmxmN6dmTcHVFQRx8JR7EPcvwVj37vGdZpmlY4kdK0kwyGGmBT5GnG5WCO/QTaqGhpQnyIKs15IRgjuK60CVRBF1ekwFKybLebE5wfdYY+LAluHMBbksfkMeDTDqyhqX8GiI/yGc2ndPsSQjyxnonLAAeWVZE9kXPnlBCeFYKVxOI5eHl5/Lwe/qAvyycq8837Af4c/zH/be/PmWDXb6kS7EFCiP+ukNrXT4BnOjz0nvlaX6AlCSRB+UgRs8eBzzEomiK4iPkPNUKBwknQkQoD4hPIoC/EBLrdnMScd3MlHUYeWdSsaI+w8RdZKJLhLGeQ9R0+5GoMU7JotCdHKBQhGyMwQziMXAXvlrohGBCxaOIRFAO5Qkw6L2Ui7sopeMtz1brgJGEunBNO1tDHFAf6vGuF9HoBsyWIUSfp6OfV48331ZaV4ZcXwWnWnNXkISQ01Q0oBADjp7qYAaaE37Rruj6nSCxD8vI+TvUE2n2mgOjPkS2UN2rRI8oVJZRihSmXoAvu4Wvu4TOgQsvMYp8KDR1Jj7T6J6CiAFXrrw3HI+RQByVRgGoKUzDcHpD0duYCAFbA1EJj2WAOLyLgdLTUli1OmyrcBTHNvYxYEyDaQPWXoaVJ0g5XK3Vbv60riRbV5elvSr0GFRslW08D4eaItdorROcg81WYTOx6naj0zJ0WJCKojoZ8t+ouo6CG6na35GZO6nCaKmCIV+c4i2cU8iCX3/bjQzPIHXbU34W0XbD7FgdkB69JaSH/wtI97eEtHNISPdbqggvnsT+bxKYwE89ywGhRKkvNjAWMIf0aGDeabnfFObmFgHdB8C5syXOzV2jqp2U4bR08RUyJi4cCukSEmJKMa8qRR5WIQ+ZPcIsDrIm8mHkie+KtVcxESu7/MIKxkQzFqvDd7DkzkwM5ygWeYjFgLvBcTkNu99mU3EZq7LJ2Rub2qbqI7LJzO/lG+lkH5JO+TIr2ugAtoEkOSRoY8WnOZHfYYV4kjEGFoefkcdg4r6piXkkzOh3+Jk3Zkbbtn1IZmx7nTcHB2VG+5p9H8A6tKVrmTeYIL2MuoAXhMj5I9gUE6Uby5ilhbdZM9ZJ2w0dAZMGw4MzqX3Z3njWOgpQ1msa6Ya30IUCaV7egWWJFlHKcy3HoJCheWiFdKSs1I27DMNykkgdqPNGEUOePGmuWEeaKlF+aZ5ELkckautnnutHBnxIxn4hSBV7YSiZiRZK46mLkauZKn7GCc9mpPIpUN9uAN0FK7zejBDOuEqQn42n0/sv07Pzi9tsnhSq7kQ2k13hKsaEyu28R5RskSJzjA6U9PdG23Zi5hAOUJwpTf+uVv6Rg50M8ur5qpcn1WUt7VUzmftznKMt/eauubVnst7N9NOoAYPXy3qv2313hiO3Hu1rWuN2mN8Em6jCGMUMZrnpWApdTBLvcNws3ik03zFUTXi/g5zDvZHz9H2R0zgZDmr8PDA7zeG2Ye2uF75uftoNfjrNfNie+Wm2s8HXIvqVoVKCsXK9Yg7x4yk/vERqSEbwU+nkQ+Arb6x8+TVZFiF0I4NZC8GbEXIttBOlH5Xorszx1JoUPaodGtguDIMYhiR8s2kQy0biUOX7uLzT91K0P6/eeDvZ74rGzQ7LYRr7Mh3WO/PrTdNhHo3p2M8Lbet0UIPMoGk6sh20TEd7IKtxEzx9LRskquWfQrLm5V9r7It/AQ==&lt;/diagram&gt;&lt;/mxfile&gt;" resource="https://www.draw.io/#Hwire-mistry%2FAOSP_Gaphics%2Fmaster%2FSurface%20Flinger.svg"><defs/><g><path d="M 85 30 L 85 60 L 110 60 L 110 79.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 110 88.88 L 105.5 79.88 L 114.5 79.88 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="0" width="170" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 15px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">SurfaceFlinger::OnTransact {Binder call 1006} Calls</div></div></div></foreignObject><text x="85" y="19" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">SurfaceFlinger::OnTransact {...</text></switch></g><path d="M 110 120 L 110 193.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 110 198.88 L 106.5 191.88 L 110 193.63 L 113.5 191.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="90" width="180" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 105px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">signalRefresh()</div></div></div></foreignObject><text x="110" y="109" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">signalRefresh()</text></switch></g><path d="M 110 230 L 110 270 L 130 270 L 130 303.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 130 308.88 L 126.5 301.88 L 130 303.63 L 133.5 301.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="200" width="180" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 215px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">mEventQueue-&gt;Refersh()</div></div></div></foreignObject><text x="110" y="219" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">mEventQueue-&gt;Refersh()</text></switch></g><path d="M 130 370 L 130 390 L 130 380 L 130 393.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 130 398.88 L 126.5 391.88 L 130 393.63 L 133.5 391.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="310" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 340px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">MessageQueue has a handler object , and Refresh() calls handler's <br />dispatchRefresh()</div></div></div></foreignObject><text x="130" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">MessageQueue has a handler object ,...</text></switch></g><path d="M 130 460 L 130 533.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 130 538.88 L 126.5 531.88 L 130 533.63 L 133.5 531.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="400" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 430px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">dispatchRefresh() is wrapper for messageQueue's looper's sendMessage()</div></div></div></foreignObject><text x="130" y="434" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">dispatchRefresh() is wrapper for mes...</text></switch></g><path d="M 130 600 L 130 673.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 130 678.88 L 126.5 671.88 L 130 673.63 L 133.5 671.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="540" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 570px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">The sendMessage of messageQueue :: looper is responded by handleMessage of messageQueue. </div></div></div></foreignObject><text x="130" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">The sendMessage of messageQueue :: l...</text></switch></g><rect x="20" y="680" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 710px; margin-left: 21px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleMessage of messageQueue call's OnMessageReceived of surface Flinger</div></div></div></foreignObject><text x="130" y="714" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">handleMessage of messageQueue call's...</text></switch></g><rect x="200" y="0" width="600" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 598px; height: 1px; padding-top: 20px; margin-left: 201px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Signal Refresh is called inside the onMessageReceived() function of surface flinger, it may seem like cyclic loop But there are checks for bootstage:BOOTLOADER, yet to be explored</div></div></div></foreignObject><text x="500" y="24" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Signal Refresh is called inside the onMessageReceived() function of surface flinger, it may seem lik...</text></switch></g><path d="M 260 190 L 260 215 L 206.37 215" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 201.12 215 L 208.12 211.5 L 206.37 215 L 208.12 218.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 200 137.5 C 152 137.5 140 155 178.4 158.5 C 140 166.2 183.2 183 214.4 176 C 236 190 308 190 332 176 C 380 176 380 162 350 155 C 380 141 332 127 290 134 C 260 123.5 212 123.5 200 137.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 155px; margin-left: 141px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">mEventQueue is <br />MessageQueue object</div></div></div></foreignObject><text x="260" y="159" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">mEventQueue is...</text></switch></g><path d="M 260 490 L 185 490 L 185 533.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 185 538.88 L 181.5 531.88 L 185 533.63 L 188.5 531.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 260 440 L 470 440 L 470 510 L 385 510 L 365 540 L 365 510 L 260 510 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 475px; margin-left: 261px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Hope Fully some day will solve the magic of How looper-&gt;sendMessage  of message queue calls handle message of messge queue</div></div></div></foreignObject><text x="365" y="479" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Hope Fully some day will solve the...</text></switch></g><path d="M 260 490 L 185 490 L 185 466.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 185 461.12 L 188.5 468.12 L 185 466.37 L 181.5 468.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>