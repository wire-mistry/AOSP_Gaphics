<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="828px" height="811px" viewBox="-0.5 -0.5 828 811" content="&lt;mxfile host=&quot;www.draw.io&quot; modified=&quot;2020-02-23T09:51:09.346Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.106 Safari/537.36&quot; etag=&quot;aKnCfOJxRqYEMKywr7ol&quot; version=&quot;12.7.2&quot; type=&quot;github&quot;&gt;&lt;diagram id=&quot;C5RBs43oDa-KdzZeNtuy&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" resource="https://www.draw.io/#Hwire-mistry%2FAOSP_Gaphics%2Fmaster%2FSurface%20Flinger.svg"><defs/><g><path d="M 132 100 L 132 130 L 157 130 L 157 149.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 157 158.88 L 152.5 149.88 L 161.5 149.88 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="47" y="70" width="170" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 85px; margin-left: 48px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">SurfaceFlinger::OnTransact {Binder call 1006} Calls</div></div></div></foreignObject><text x="132" y="89" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">SurfaceFlinger::OnTransact {...</text></switch></g><path d="M 157 190 L 157 263.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 157 268.88 L 153.5 261.88 L 157 263.63 L 160.5 261.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="67" y="160" width="180" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 175px; margin-left: 68px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">signalRefresh()</div></div></div></foreignObject><text x="157" y="179" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">signalRefresh()</text></switch></g><path d="M 157 300 L 157 340 L 177 340 L 177 373.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 177 378.88 L 173.5 371.88 L 177 373.63 L 180.5 371.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="67" y="270" width="180" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 285px; margin-left: 68px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">mEventQueue-&gt;Refersh()</div></div></div></foreignObject><text x="157" y="289" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">mEventQueue-&gt;Refersh()</text></switch></g><path d="M 177 440 L 177 460 L 177 450 L 177 463.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 177 468.88 L 173.5 461.88 L 177 463.63 L 180.5 461.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="67" y="380" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 410px; margin-left: 68px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">MessageQueue has a handler object , and Refresh() calls handler's <br />dispatchRefresh()</div></div></div></foreignObject><text x="177" y="414" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">MessageQueue has a handler object ,...</text></switch></g><path d="M 177 530 L 177 603.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 177 608.88 L 173.5 601.88 L 177 603.63 L 180.5 601.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="67" y="470" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 500px; margin-left: 68px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">dispatchRefresh() is wrapper for messageQueue's looper's sendMessage()</div></div></div></foreignObject><text x="177" y="504" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">dispatchRefresh() is wrapper for mes...</text></switch></g><path d="M 177 670 L 177 743.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 177 748.88 L 173.5 741.88 L 177 743.63 L 180.5 741.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="67" y="610" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 640px; margin-left: 68px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">The sendMessage of messageQueue :: looper is responded by handleMessage of messageQueue. </div></div></div></foreignObject><text x="177" y="644" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">The sendMessage of messageQueue :: l...</text></switch></g><rect x="67" y="750" width="220" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 780px; margin-left: 68px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">handleMessage of messageQueue call's OnMessageReceived of surface Flinger</div></div></div></foreignObject><text x="177" y="784" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">handleMessage of messageQueue call's...</text></switch></g><rect x="17" y="0" width="600" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" stroke-dasharray="3 3" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 598px; height: 1px; padding-top: 20px; margin-left: 18px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">&lt;Comment&gt; This Signal Refresh is called inside the onMessageReceived() function of surface flinger, it may seem like cyclic loop But there are checks for bootstage:BOOTLOADER, yet to be explored</div></div></div></foreignObject><text x="317" y="24" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">&lt;Comment&gt; This Signal Refresh is called inside the onMessageReceived() function of surface flinger,...</text></switch></g><path d="M 307 260 L 307 285 L 253.37 285" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 248.12 285 L 255.12 281.5 L 253.37 285 L 255.12 288.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 247 207.5 C 199 207.5 187 225 225.4 228.5 C 187 236.2 230.2 253 261.4 246 C 283 260 355 260 379 246 C 427 246 427 232 397 225 C 427 211 379 197 337 204 C 307 193.5 259 193.5 247 207.5 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 225px; margin-left: 188px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">mEventQueue is <br />MessageQueue object</div></div></div></foreignObject><text x="307" y="229" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">mEventQueue is...</text></switch></g><path d="M 307 575 L 232 575 L 232 603.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 232 608.88 L 228.5 601.88 L 232 603.63 L 235.5 601.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 307 525 L 517 525 L 517 595 L 432 595 L 412 625 L 412 595 L 307 595 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 560px; margin-left: 308px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Hope Fully some day will solve the magic of How looper-&gt;sendMessage  of message queue calls handle message of messge queue</div></div></div></foreignObject><text x="412" y="564" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Hope Fully some day will solve the...</text></switch></g><path d="M 307 575 L 232 575 L 232 536.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 232 531.12 L 235.5 538.12 L 232 536.37 L 228.5 538.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 447 105 L 332 105 L 332 92.5 L 223.37 92.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 218.12 92.5 L 225.12 89 L 223.37 92.5 L 225.12 96 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="447" y="50" width="380" height="110" rx="16.5" ry="16.5" fill="#ffffff" stroke="#000000" stroke-dasharray="3 3" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 378px; height: 1px; padding-top: 105px; margin-left: 448px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">As like every other onTransact, this too has to be called by some binder , and this biner initiation is object is taken by taking the "SurfaceFlinger" service in SurfaceComposerClient.cpp @ function connectLocked() of ComposerService class. <br />Note: ComposorClient inherits singleton class  hence get instance method is available directly to composerClitent</div></div></div></foreignObject><text x="637" y="109" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">As like every other onTransact, this too has to be called by so...</text></switch></g><path d="M 67 175 L 17 175 Q 7 175 7 165 L 7 30 Q 7 20 8.82 20 L 10.63 20" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="1 4" pointer-events="stroke"/><path d="M 15.88 20 L 8.88 23.5 L 10.63 20 L 8.88 16.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>